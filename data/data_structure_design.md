# JANコードキャンペーン表示アプリのデータ構造設計

## 概要

JANコードから商品情報とキャンペーン適用状況を即時に表示するためのデータ構造を設計します。発達障害のあるスタッフを含む現場での運用を考慮し、シンプルかつ明確な情報提示を実現するデータ構造とします。

## データモデル

### 1. 商品データ（products）

```json
{
  "jan_code": "4549526000000",  // JANコード（主キー）
  "name": "エディフィス カラーダイヤル",  // 商品名
  "brand": "CASIO",  // ブランド名
  "category": "腕時計",  // カテゴリ
  "sub_category": "エディフィス",  // サブカテゴリ
  "price": 35000,  // 価格（税抜）
  "tax_included_price": 38500,  // 税込価格
  "image_url": "images/edifice_123.jpg",  // 商品画像URL
  "description": "カラーダイヤルシリーズの腕時計",  // 商品説明
  "specifications": {  // 仕様情報（オプション）
    "model_number": "EFR-123",
    "color": "シルバー",
    "features": ["ソーラー充電", "防水"]
  }
}
```

### 2. キャンペーンデータ（campaigns）

```json
{
  "campaign_id": "casio_warranty_2025",  // キャンペーンID（主キー）
  "name": "カシオ保証延長キャンペーン",  // キャンペーン名
  "brand": "CASIO",  // 対象ブランド
  "start_date": "2025-03-14",  // 開始日
  "end_date": "2025-04-06",  // 終了日
  "description": "通常1年の保証が2年へ無料にて延長されます",  // 説明
  "short_description": "保証期間1年延長無料",  // 簡潔な説明（UI表示用）
  "campaign_type": "warranty_extension",  // キャンペーンタイプ
  "priority": 1,  // 表示優先度（数字が小さいほど優先）
  "conditions": [  // 適用条件
    {
      "type": "product_series",
      "values": ["エディフィスカラーダイヤル", "オシアナス", "G-SHOCKフルメタル"]
    },
    {
      "type": "model_specific",
      "values": ["GMC-B2100", "GMW-B5000", "GM-B2100"]
    }
  ],
  "exclusions": [  // 除外条件
    {
      "type": "product_series",
      "values": ["G-SHOCK（フルメタル以外）"]
    }
  ],
  "benefits": [  // 特典内容
    {
      "type": "warranty_extension",
      "value": "1年",
      "description": "通常有償となる延長保証1年分を無料"
    }
  ],
  "notes": [  // 注意事項
    "レジ操作の際に、延長保証1年分を通常通り押して、金額を0円へ訂正してください",
    "3年保証・4年保証へ延長する場合は、必ず差額を頂いてください（3年保証：差額1,100円、4年保証：差額2,200円）",
    "対象商品を接客時には、保証が無料で延長されることを必ずお伝えください"
  ],
  "color_code": "#4CAF50"  // UI表示用カラーコード（緑：適用可、赤：適用不可など）
}
```

### 3. 商品-キャンペーン関連データ（product_campaigns）

```json
{
  "jan_code": "4549526000000",  // JANコード（外部キー）
  "campaign_id": "casio_warranty_2025",  // キャンペーンID（外部キー）
  "is_applicable": true,  // 適用可能かどうか
  "application_reason": "エディフィスカラーダイヤルシリーズ対象商品",  // 適用理由
  "exclusion_reason": null,  // 除外理由（適用不可の場合）
  "additional_notes": "お客様に保証延長について必ず案内してください"  // 追加注意事項
}
```

## データ構造の特徴

1. **シンプルな関連付け**：JANコードを主キーとして商品情報とキャンペーン情報を関連付け
2. **明確な適用条件**：キャンペーンの適用条件と除外条件を明示的に定義
3. **視覚的区別**：カラーコードを用いて適用可/不可を視覚的に区別
4. **優先度管理**：複数キャンペーンの表示優先度を管理
5. **簡潔な説明**：短い説明文（short_description）を用意し、UI表示を簡潔に

## 発達障害特性への配慮

1. **明確な二択**：適用「可/不可」を明示的に表示（is_applicable）
2. **視覚的区別**：色分けによる直感的な理解をサポート（color_code）
3. **簡潔な情報**：短い説明と詳細情報の分離（short_description と description）
4. **具体的な理由**：適用/除外の理由を明示（application_reason, exclusion_reason）
5. **優先順位**：重要な情報から表示（priority）

## 拡張性

1. **CSV読み込み対応**：将来的なCSV読み込みに対応できるシンプルな構造
2. **キャンペーンタイプ**：様々なキャンペーンタイプに対応できる柔軟な構造
3. **条件の組み合わせ**：複数の条件を組み合わせた複雑なキャンペーンにも対応可能
4. **簡易CMS対応**：将来的な管理画面からの編集を想定した構造

## 実装方針

初期段階では、上記のデータ構造をJSONファイルとして実装し、アプリケーション内で読み込む形式とします。将来的にはCSV読み込みや簡易CMSへの展開も視野に入れた設計としています。
